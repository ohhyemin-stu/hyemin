<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>한글 타자기</title>
<style>
  body { font-family: sans-serif; text-align: center; }
  label { display: block; border: 1px solid #000; padding: 10px; height: 40px; margin: 20px auto; width: 80%; overflow-wrap: break-word; }
  .key { display: inline-block; padding: 10px; margin: 2px; border: 1px solid #000; width: 30px; }
  .group1 { background: #ffb3ba; }
  .group2 { background: #baffc9; }
  .group3 { background: #bae1ff; }
  .group4 { background: #ffffba; }
  .flash { background: yellow !important; }
</style>
</head>
<body>
<h3>오** | 2***** | 한양 빅데이터</h3>
<button onclick="toggleLang()">한/영</button> <span id="lang">현재: 영어</span>
<div id="keys"></div>
<label id="display"></label>
<script>
let lang = 'en';
let en = [['1','2','3','4','5','6','7','8','9','0'],['q','w','e','r','t','y','u','i','o','p'],['a','s','d','f','g','h','j','k','l'],['z','x','c','v','b','n','m',',','.']];
let koMap = {
  'q': 'ㅂ', 'w': 'ㅈ', 'e': 'ㄷ', 'r': 'ㄱ', 't': 'ㅅ', 'y': 'ㅛ', 'u': 'ㅕ', 'i': 'ㅑ', 'o': 'ㅐ', 'p': 'ㅔ',
  'a': 'ㅁ', 's': 'ㄴ', 'd': 'ㅇ', 'f': 'ㄹ', 'g': 'ㅎ', 'h': 'ㅗ', 'j': 'ㅓ', 'k': 'ㅏ', 'l': 'ㅣ',
  'z': 'ㅋ', 'x': 'ㅌ', 'c': 'ㅊ', 'v': 'ㅍ', 'b': 'ㅠ', 'n': 'ㅜ', 'm': 'ㅡ', ',': ',', '.': '.'
};
let keys = document.getElementById('keys');
let display = document.getElementById('display');
let langText = document.getElementById('lang');

function draw() {
  keys.innerHTML = '';
  let currentLayout = (lang === 'en') ? en : [
    ['ㅂ','ㅈ','ㄷ','ㄱ','ㅅ','ㅛ','ㅕ','ㅑ','ㅐ','ㅔ'],
    ['ㅁ','ㄴ','ㅇ','ㄹ','ㅎ','ㅗ','ㅓ','ㅏ','ㅣ'],
    ['ㅋ','ㅌ','ㅊ','ㅍ','ㅠ','ㅜ','ㅡ'],
    ['.']
  ];
  currentLayout.forEach((row, i) => {
    row.forEach(k => {
      let b = document.createElement('div');
      b.className = 'key group' + (i + 1);
      b.textContent = k;
      keys.appendChild(b);
    });
    keys.appendChild(document.createElement('br'));
  });
}

function toggleLang() {
  lang = lang === 'en' ? 'ko' : 'en';
  langText.textContent = '현재: ' + (lang === 'en' ? '영어' : '한글');
  draw();
}

document.addEventListener('keydown', e => {
  let k = e.key.toLowerCase();

  if (k === 'backspace') {
    display.textContent = display.textContent.slice(0, -1);
    return;
  }
  if (k === '.') {
    toggleLang();
    return;
  }

  let charToShow = '';

  if (lang === 'en') {
    en.flat().forEach(key => {
      if (key === k) charToShow = key;
    });
  } else {
    if (koMap[k]) charToShow = koMap[k];
  }

  if (charToShow) {
    display.textContent += charToShow;
    [...document.getElementsByClassName('key')].forEach(el => {
      if (el.textContent === charToShow) {
        el.classList.add('flash');
        setTimeout(() => el.classList.remove('flash'), 200);
      }
    });
  }
});

draw();
</script>
</body>
</html>
